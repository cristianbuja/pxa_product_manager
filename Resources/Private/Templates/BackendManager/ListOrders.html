<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:pxa="http://typo3.org/ns/Pixelant/PxaProductManager/ViewHelpers/Backend" data-namespace-typo3-fluid="true">

<f:layout name="BELayout" />
<f:debug>{_all}</f:debug>

<f:section name="main">
    <h1>
        <pxa:translate key="be.module_name" />
        - "{pageTitle}"
    </h1>

    <f:flashMessages />

    <f:if condition="{listOrders}">
        <f:then>
            <div class="bs-example">
                <span class="title"><pxa:translate key="be.action.listOrders" /></span>

                <ul class="nav nav-pills" role="tablist">
                    <f:for each="{0: 'new', 1: 'all', 2: 'archive'}" as="tab">
                        <li role="presentation" class="{f:if(condition: '{tab} == {activeTab}', then: 'active')}">
                            <f:link.action action="listOrders" arguments="{activeTab: tab}">
                                <pxa:translate key="be.{tab}_order_nav_tab" />
                                <span class="badge">{ordersCount.{tab}}</span>
                            </f:link.action>
                        </li>
                    </f:for>
                </ul>

                <div class="list-group">
                    <f:widget.paginate objects="{listOrders}" as="paginatedListOrders" configuration="{itemsPerPage: settings.listOrders.itemsPerPage, insertAbove: 0, insertBelow: 1, maximumNumberOfLinks: 10}">
                        <f:for each="{paginatedListOrders}" as="order">
                            <f:link.action class="list-group-item" action="showOrder" arguments="{order: order, backUrl: backUrl}">
                                UID - {order.uid}. <pxa:orderTitle titleTemplate="{settings.listOrders.title}">{order}</pxa:orderTitle>
                            </f:link.action>
                        </f:for>
                    </f:widget.paginate>
                </div>
            </div>
        </f:then>
        <f:else>
            <f:render partial="Backend/Notification"
                      arguments="{title: '{pxa:translate(key: \'be.no_orders\')}', body: '{pxa:translate(key: \'be.no_orders_text\')}'}" />
        </f:else>
    </f:if>
</f:section>
</html>